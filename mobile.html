<script> onload=()=>{
document.write('<body style=margin:0;background-color:#000;display:grid;place-items:center;height:100%><canvas height=1080 id=c3d style="width:min(100vw,calc(100vh * 16/9));position:absolute;aspect-ratio:16/9;color:#fff" width=1920></canvas><div id=tmpl style="width:min(100vw,calc(100vh * 16/9));position:absolute;aspect-ratio:16/9;color:#fff"></div>'); function aa(a,b,c){a.x=b.x+c.x;a.y=b.y+c.y;a.z=b.z+c.z;return a} function ca(a){return new f(a.x,a.y,a.z,a.w)} function g(a,b,c){a.x=b.x-c.x;a.y=b.y-c.y;a.z=b.z-c.z;return a} function da(a,b){g(a,a,b);return a} function ea(a,b,c){let d=b.z*c.x-b.x*c.z,e=b.x*c.y-b.y*c.x;a.x=b.y*c.z-b.z*c.y;a.y=d;a.z=e;return a} function h(a,b){return a.x*b.x+a.y*b.y+a.z*b.z} function fa(a){return [a.x,a.y,a.z]} function m(a){let b=a.$;if(0===b)return new f;a.x/=b;a.y/=b;a.z/=b;return a}
 function ia(a,b,c){a.x+=(b.x-a.x)*c;a.y+=(b.y-a.y)*c;a.z+=(b.z-a.z)*c} function ka(a,b){return a.x===b.x&&a.y===b.y&&a.z===b.z}class f extends DOMPoint{K(a){aa(this,this,a);return this}set(a,b,c){a&&"object"===typeof a&&(b=a.y,c=a.z,a=a.x);this.x=a??this.x;this.y=b??this.y;this.z=c??this.z;return this}m(a){this.x*=a;this.y*=a;this.z*=a;return this}get $(){return Math.hypot(...fa(this))}}
class la{constructor(){this.B=this.l=this.s=this.i=!1;this.A=new f;this.g=new Map;


//document.addEventListener("keydown",a=>this.g.set(a.code,!0));document.addEventListener("keyup",a=>this.g.set(a.code,!1));document.addEventListener("mousedown",()=>this.g.set("KeyE",!0));document.addEventListener("mouseup",()=>this.g.set("KeyE",!1));document.addEventListener("mousemove",a=>{this.A.x=a.movementX;this.A.y=a.movementY;this.G?.(this.A)});




document.body.style.userSelect = 'none';
let fs=1,lx,ly,sx,sy,dx,dy,s=0.2,tw=0,tf=0,ta=0,h=innerHeight,w=innerWidth;
addEventListener("touchmove",(e)=>{e.preventDefault(); let t=e.touches[0],cx=t.clientX,cy=t.clientY;
if(lx===undefined){lx=cx;}dx=(cx-lx)*s;lx=cx; if(ly===undefined){ly=cy;}dy=(cy-ly)*s;ly=cy;
this.A.x+=dx; this.A.y+=dy; this.G?.(this.A);
},{passive:false});
addEventListener("touchstart",(e)=>{ sx=e.touches[0].clientX; sy=e.touches[0].clientY; });
addEventListener("touchend",(e)=>{ let t=e.changedTouches[0],cx=t.clientX,cy=t.clientY;
if(fs){document.documentElement.requestFullscreen();fs=0;}
if     (cy<h*0.2 && cx<w/2){this.g.set("KeyF",tf^=1);}
else if(cy<h*0.2 && cx>w/2){this.g.set("KeyE",ta^=1);}
else if(sy&&Math.abs(sx-cx)<20&&Math.abs(sy-cy)<20){this.g.set("KeyW",tw^=1);}
});




this.j=new f}}let p=new la;class r{constructor(a){this.O=a?.O}}
class ma{constructor(){this.g=c3d.getContext("webgl2");var a=this.createShader(35633,"#version 300 es\nlayout(location=0) in vec3 L;layout(location=1) in vec3 B;layout(location=2) in vec2 F;layout(location=3) in float H;uniform mat4 I,M,e,l;out vec2 o;out float n;out vec3 u;out mat4 h;out vec4 K;out vec3 t;void main(){vec4 v=vec4(L,1);gl_Position=I*v;o=F;n=H;u=B;h=M;K=e*v;t=(l*v).xyz;}"),b=this.createShader(35632,"#version 300 es\nprecision highp float;\nin vec2 o;in float n;in vec3 u;in mat4 h;in vec3 t;uniform vec3 v,d;vec4 s=vec4(1);uniform mediump sampler2DArray z;uniform mediump samplerCube x;uniform vec3 c,y;vec4 A=vec4(1,1,.8,1);float C=1.,D=.85;vec4 G=vec4(.05,.05,.05,1);out vec4 g;float p(float v,float m,float f,float h){return 1./(v*v*m+v*f+h);}void main(){vec3 m=t-v,l=v-t;float f=length(m);vec3 e=normalize(m),i=normalize(l);float B=texture(x,e).x*40.,E=.015,F=0.;F=B+E<f?0.:1.;vec3 H=normalize(mat3(h)*u);float I=max(0.,dot(i,H)),J=p(f,d.x,d.y,d.z);vec4 K=s*I*J*F;vec3 L=c-t,M=normalize(L);float N=length(L),O=max(0.,dot(M,H)),P=dot(y,-M),Q=smoothstep(D,C,P),R=p(N,.005,.001,.4);vec4 S=A*O*Q*R,T=clamp(G+K+S,G,vec4(1));g=texture(z,vec3(o,n))*T;}");
this.i=this.createProgram(a,b);a=this.createShader(35633,"#version 300 es\nprecision highp float;\nlayout(location=0) in vec4 i;uniform mat4 e,l;out vec3 f;void main(){gl_Position=e*i;f=vec3(l*vec4(i.xyz,1));}");b=this.createShader(35632,"#version 300 es\nprecision highp float;\nuniform vec3 v;in vec3 f;out float m;void main(){m=length(f-v)/40.;}");this.j=this.createProgram(a,b);a=this.g.getUniformLocation(this.i,"x");b=this.g.getUniformLocation(this.i,"z");this.g.useProgram(this.i);this.g.uniform1i(b,
0);this.g.uniform1i(a,2)}createShader(a,b){a=this.g.createShader(a);this.g.shaderSource(a,b);this.g.compileShader(a);return a}createProgram(a,b){let c=this.g.createProgram();this.g.attachShader(c,a);this.g.attachShader(c,b);this.g.linkProgram(c);return c}}let t=new ma,z=t.g;class na{constructor(a,b){this.source=b;this.id=a}} function C(a,b){b=new na(a.g.length,b);a.g.push(b);return b}
 function oa(){var a=E;z.activeTexture(z.TEXTURE0);z.bindTexture(35866,z.createTexture());z.texStorage3D(35866,8,z.RGBA8,512,512,a.g.length);a.g.forEach((b,c)=>{z.texSubImage3D(35866,0,0,0,c,512,512,1,z.RGBA,z.UNSIGNED_BYTE,b.source)});z.generateMipmap(35866)}class ra{constructor(){this.g=[]}}let E=new ra;async function sa(a){let b=new Image;b.src=URL.createObjectURL(new Blob([a],{type:"image/svg+xml"}));return new Promise(c=>b.addEventListener("load",()=>c(b)))}let F={};
async function ta(){F.o=new r({O:C(E,await sa('<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg"><filter id="a"><feTurbulence type="fractalNoise" baseFrequency="0.1, 0.007" numOctaves="6" stitchTiles="stitch"/><feComposite in="s" operator="arithmetic" k2=".5" k3=".6"/><feComponentTransfer><feFuncA type="table" tableValues="0, .1, .2, .3, .4, .2, .4"/></feComponentTransfer><feDiffuseLighting color-interpolation-filters="sRGB" surfaceScale="3" lighting-color="#6e3f2b"><feDistantLight azimuth="110" elevation="48"/></feDiffuseLighting></filter><rect height="100%" width="100%" filter="url(#a)"/></svg>'))});
F.face=new r({O:C(E,await sa('<svg style="filter: invert()" width="512" height="512" xmlns="http://www.w3.org/2000/svg"><filter id="a" x="-0.01%" primitiveUnits="objectBoundingBox" width="100%" height="100%"><feTurbulence seed="7" type="fractalNoise" baseFrequency="0.005" numOctaves="5" result="n"/><feComposite in="SourceAlpha" operator="in"/><feDisplacementMap in2="n" scale="0.9"/></filter><rect x="0" y="-14" width="100%" height="100%" id="l" filter="url(#a)"/><rect fill="#fff" width="100%" height="100%"/><use href="#l" x="22%" y="42" transform="scale(2.2, 1.2)"></use><use href="#l" x="-22%" y="42" transform="rotate(.1) scale(-2.2 1.2)"></use><rect fill="#777" x="220" y="230" width="50" height="50"/></svg>'))});
F.R=new r({O:C(E,await ua("",20))});F.wa=new r({O:C(E,await ua())});F.bb=new r({O:C(E,await sa('<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg"><pattern id="a" width="256" height="256" patternUnits="userSpaceOnUse"><circle r="290" fill="#fff"/><path d="M0 0h128v256h128V128H0z"/></pattern><filter id="b"><feTurbulence baseFrequency=".04" numOctaves="5"/><feColorMatrix values="1 -1 0 0 0 1 -1 0 0 0 1 -1 0 0 0 0 0 0 0 0.3"/><feBlend in="SourceGraphic" mode="soft-light"/></filter><rect width="100%" height="100%" fill="url(#a)" filter="url(#b)"/></svg>'))});
F.Ya=new r({O:C(E,await sa('<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512"><pattern id="b" width="512" height="256" patternUnits="userSpaceOnUse"><path d="M8 7h502v248H8z"/></pattern><filter id="a"><feTurbulence type="fractalNoise" baseFrequency=".8" numOctaves="8"/><feComposite in="SourceGraphic" operator="arithmetic" k2=".5" k3=".5"/><feComponentTransfer result="n"><feFuncA type="gamma" exponent="4"/></feComponentTransfer><feDiffuseLighting color-interpolation-filters="sRGB" lighting-color="#fff" surfaceScale="-1" result="d"><feDistantLight azimuth="40" elevation="55"/></feDiffuseLighting></filter><rect width="100%" height="100%" filter="url(#a)" fill="url(#b)"/></svg>'))});
F.jb=new r({O:C(E,await va())});F.mb=new r({O:C(E,await sa('<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512"><filter id="a"><feTurbulence type="fractalNoise" baseFrequency=".09" numOctaves="2"/><feDiffuseLighting color-interpolation-filters="sRGB" lighting-color="#600" result="d"><feDistantLight azimuth="90" elevation="55"/></feDiffuseLighting></filter><rect width="100%" height="100%" filter="url(#a)"/></svg>'))});F.S=new r({O:C(E,await wa(!0))});F.na=new r({O:C(E,await wa())});F.C=
new r({O:C(E,await Aa("#bbb"))});F.red=new r({O:C(E,await Aa("#b00"))});for(let a=1;13>=a;a++)F[a]=new r({O:C(E,await ua(`<text x="21%" y="42%" font-size="150px" style="transform: scaleY(1.5)">${`13${a.toString().padStart(2,"0")}`}</text>`,30))});oa()}
 function wa(a=!1){return sa(`<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512"><pattern id="b" width="128" height="128" patternUnits="userSpaceOnUse"><path fill="#687A5E" d="M0 0h128v128H0z"/>${a?'<text x="64" y="64" style="font-size:64px" stroke="#506546" fill="#506546">\u2740</text><text y="128" style="font-size:50px" stroke="#506546" fill="#506546">\u2726</text>':""}</pattern><filter id="a"><feTurbulence baseFrequency=".4" stitchTiles="stitch"/><feDiffuseLighting color-interpolation-filters="sRGB" lighting-color="#687A5E"><feDistantLight azimuth="120" elevation="45"/></feDiffuseLighting><feBlend in="SourceGraphic" mode="difference"/></filter><rect width="100%" height="100%" filter="url(#a)" fill="url(#b)"/></svg>`)}
async function va(){let a=[30,50,70],b=70,c=(e,k,n)=>`<ellipse cx="${e}%" cy="${k}%" rx="40" ry="40" fill="${13>n?"#777":"#ffa"}" stroke="black" stroke-width="4"></ellipse><text x="${e}%" dx="${9<n?-30:-14}" y="${k}%" dy="18" style="font-weight: bold; font-size: 60px;">${n}</text>`,d=c(50,90,1);for(let e=0;12>e;e++){let k=e%3;0<e&&0===k&&(b-=20);d+=c(a[k],b,e+2)}return ua(d,30)}
 function ua(a="",b=1){b=.01*b;return sa(`<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg"><filter id="b"><feTurbulence baseFrequency="0.01,0.0008" numOctaves="2" seed="23" type="fractalNoise" stitchTiles="stitch" /><feColorMatrix values="${b}, ${b}, ${b}, 0, 0,${b}, ${b}, ${b}, 0, 0,${b}, ${b}, ${b}, 0, 0,1, 1, 1, 1, 1"/></filter><rect x="0" y="0" width="100%" height="100%" filter="url(#b)"/>${a}</svg>`)}
 function Aa(a){return sa(`<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg"><rect x="0" y="0" width="100%" height="100%" fill="${a}"/></svg>`)} function Ba(a){return Math.floor((a.x+90)/15)+12*Math.floor((a.z+90)/15)} function Ca(a,b){a=Ba(a);return [a,a-1-12,a-12,a+1-12,a-1,a+1,a-1+12,a+12,a+1+12].filter(c=>0<=c&&c<b)} function Da(a){let b=[];a.forEach(c=>{c.Aa.map(Ba).forEach(d=>{b[d]||(b[d]=new Set);b[d].add(c)})});return b}let Ea=new f(0,1,0),Fa=new f(0,-1,0);
 function Ga(a,b){for(let e of a)if(!ka(e.D,Fa)&&!ka(e.D,Ea)){a:{a=b.Za;var c=e;if(!(0>h(g(new f,a.Fa,c.Aa[0]),c.D))){c=Ha(a.Fa,c.Aa[0],c.Aa[1],c.Aa[2]);c=g(new f,a.Fa,c);var d=h(c,c);if(d<=a.Ra*a.Ra){a={Pa:m(c),lb:a.Ra-Math.sqrt(d)};break a}}a=void 0}a&&(c=a.Pa.m(a.lb+1E-8),b.Za.Fa.K(c),a=a.Pa.m(h(b.aa,a.Pa)),da(b.aa,a),.6<=e.D.y&&0>b.aa.y?b.aa.y=0:-.6>=e.D.y&&0<b.aa.y&&(b.aa.y=0))}}
 function Ha(a,b,c,d){var e=g(new f,c,b),k=g(new f,d,b),n=g(new f,a,b),l=h(e,n),u=h(k,n);if(0>=l&&0>=u)return b;n=g(new f,a,c);let x=h(e,n),y=h(k,n);if(0<=x&&y<=x)return c;n=l*y-x*u;if(0>=n&&0<=l&&0>=x)return k=l/(l-x),aa(new f,b,(new f).set(e).m(k));var w=g(new f,a,d);a=h(e,w);w=h(k,w);if(0<=w&&a<=w)return d;l=a*u-l*w;if(0>=l&&0<=u&&0>=w)return e=u/(u-w),aa(new f,b,(new f).set(k).m(e));u=x*w-a*y;if(0>=u&&0<=y-x&&0<=a-w)return b=(y-x)/(y-x+(a-w)),b=g(new f,d,c).m(b),aa(new f,c,b);c=1/(u+l+n);d=l*c;
c*=n;e=(new f).set(e).m(d);k=(new f).set(k).m(c);return aa(new f,e,k).K(b)}let G=new AudioContext,Ja=G.createDynamicsCompressor(),Ka=G.createBiquadFilter();Ka.type="lowshelf";Ka.frequency.value=500;Ka.gain.value=20;Ka.connect(Ja);Ja.threshold.value=-50;Ja.knee.value=40;Ja.ratio.value=12;Ja.connect(G.destination);let La=.5*G.sampleRate,Ma={};Ma.n0=G.createBuffer(1,La,G.sampleRate);Ma.n1=G.createBuffer(1,La,G.sampleRate);for(let a=0;a<La;++a)Ma.n0.getChannelData(0)[a]=2*Math.random()-1;
for(let a=0;64>a;++a){let b=10*Math.random()+1,c=10*Math.random()+1;for(let d=0;d<La;++d){let e=Math.sin(d/La*2*Math.PI*440*b)*Math.sin(d/La*2*Math.PI*440*c);Ma.n1.getChannelData(0)[d]+=e/8}} function Na(a,b,c,d){0!=d?a.setTargetAtTime(b,c,d):a.setValueAtTime(b,c)}
 function H(a,b,c,d,e,k){let n,l=[],u=[],x=[],y=[],w=440*2**((c-69)/12);for(let q=0;q<e.length;++q){let v=e[q];if(0===v.N){var A=a.g;n=d*d/16384;y[q]=w*v.t+v.f}else l[v.N-1].frequency?(A=l[v.N-1].frequency,n=y[v.N-1]):(A=l[v.N-1].playbackRate,n=y[v.N-1]/440),y[q]=y[v.N-1]*v.t+v.f;switch(v.w[0]){case"n":l[q]=G.createBufferSource();l[q].buffer=Ma[v.w];l[q].loop=!0;l[q].playbackRate.value=y[q]/440;1!=v.p&&Na(l[q].playbackRate,y[q]/440*v.p,b,v.q);l[q].detune&&(a.j.connect(l[q].detune),l[q].detune.value=
a.i);break;default:l[q]=G.createOscillator(),l[q].frequency.value=y[q],1!=v.p&&Na(l[q].frequency,y[q]*v.p,b,v.q),l[q].type=v.w,l[q].detune&&(a.j.connect(l[q].detune),l[q].detune.value=a.i)}u[q]=G.createGain();v.r;l[q].connect(u[q]);u[q].connect(A);x[q]=n*v.F;v.k&&(x[q]*=2**((c-60)/12*v.k));v.a?(u[q].gain.value=0,u[q].gain.setValueAtTime(0,b),u[q].gain.linearRampToValueAtTime(x[q],b+v.a)):u[q].gain.setValueAtTime(x[q],b);Na(u[q].gain,v.fa*x[q],b+v.a+v.da,v.d);l[q].start(b);for(A=u.length-1;0<=A;--A)u[A].gain.cancelScheduledValues(v.d+
k),Na(u[A].gain,0,k,v.d),l[q].stop(k+v.d)}}class Oa{constructor(){this.g=G.createGain();this.j=G.createGain();this.i=0}}
let I={N:0,w:"sine",t:1,f:0,F:.5,a:0,da:.01,d:.01,fa:0,r:.05,p:1,q:1,k:0},Pa=[{...I,w:"triangle",F:.7,t:.5,d:.2,r:.2,p:.95},{...I,w:"n1",F:9,N:1,d:.2,r:.2}],Qa=[{...I,w:"sawtooth",F:.4,a:.1,d:.2},{...I,w:"sine",F:5,d:.2,fa:.2,N:1}],Ra=[{...I,w:"square",F:.1,a:.1,d:.5,fa:.5,r:.08},{...I,w:"sine",F:1,d:.1,fa:4,N:1}],Sa=[{...I,w:"sawtooth",F:.4,a:.1,d:1,p:2,q:1.5},{...I,N:1,w:"n1",F:.8,f:11,d:11,fa:.2}],Ta=[{...I,w:"n0",F:.2,a:.05,da:.02,d:.02,r:.02}],Ua=[{...I,w:"n0",p:0,r:.01,da:0,F:.3}],Va=[{...I,
w:"sine",f:1651,F:.15,d:.5,r:.2,da:0,t:0},{...I,w:"sawtooth",N:1,t:1.21,F:7.2,d:.1,r:11,da:1},{...I,N:1,w:"n0",F:3.1,t:.152,d:.002,r:.002}],Wa=[{...I,w:"sine",t:0,f:100,a:.2,d:1,r:2,fa:1,q:7},{...I,N:1,w:"n1",F:.7,t:.9,d:1,fa:1,r:1.5,f:40}],Xa=[{...I,w:"triangle",t:0,f:88,F:1,d:.05,da:.03,p:.5,q:.1},{...I,w:"n0",N:1,t:5,F:42,r:.01,da:0,p:0}],Ya=[{...I,w:"sine",t:0,f:90,F:1,d:1,da:.5,p:.5,q:.5,a:1,fa:.5,r:1},{...I,w:"n0",N:1,t:5,F:3.6,r:1,da:.5,p:0,f:40,a:1,d:.75,fa:.5}],Za="2P(322P*322P,322P.322Q0322P2322P4322Q6322R8322R:322R<322R>322S@322RB322RD322SF322MH322MJ322ML322MN322NP322MR322MT322NV3235(B<32(B<3/(B<3/8B<3,8B<3)8B<36HB<33HB<30HB<".match(/.{5}/g).map(a=>
[a.charCodeAt(0)-50,a.charCodeAt(1),(a.charCodeAt(2)-40)/8,(a.charCodeAt(3)-50)/8,a.charCodeAt(4)-20]);var $a=new f(0,7,0);new f(1,1,1);var ab=new f(.008,.01,.4),bb=new f,cb=new f;new f(1,1,1);class db{constructor(a){this.Fa=a;this.Ra=2}} function fb(a){a.ia+=50;a.ia=Math.min(a.ia,100)} function gb(a,b){a.s.set(a.M);a.W=!0;a.g.position.set(b.position);a.J.set(b.J);H(a.j,G.currentTime,30,40,Ta,G.currentTime+1)} function hb(a){a.W=!1;a.M.set(a.s);H(a.j,G.currentTime,38,40,Ta,G.currentTime+1)}
 function ib(a){let b=Math.sin(a.J.y)*p.j.y*.24,c=Math.sin(a.J.y+Math.PI/2)*p.j.x*.24;a.aa.z=Math.cos(a.J.y)*p.j.y*.24+Math.cos(a.J.y+Math.PI/2)*p.j.x*.24;a.aa.x=b+c;m(a.aa).m(.24);p.s&&!p.B&&(H(a.j,G.currentTime,31+(a.xa?0:10),40,Ua,G.currentTime+1),a.xa=!a.xa)}
 function jb(a){a.i.positionX?(a.i.positionX.value=a.g.position.x,a.i.positionY.value=a.g.position.y,a.i.positionZ.value=a.g.position.z,a.i.forwardX.value=a.D.x,a.i.forwardY.value=a.D.y,a.i.forwardZ.value=a.D.z):(a.i.setPosition(...fa(a.g.position)),a.i.setOrientation(a.D.x,a.D.y,a.D.z,0,1,0))}
 function kb(a,b){a.l&&-1!==a.l&&(tmpl.innerHTML+=`<div style="font-size: 30px; text-align: center; position: absolute; bottom: 50px; right: 80px;">\ud83d\udddd\ufe0f #${a.l}</div>`);tmpl.innerHTML+=`<div style="font-size: 40px; text-align: center; position: absolute; bottom: 10px; right: 280px; color: #b00;">\u2665 <div style="position: absolute; bottom: 13px; left: 30px; width: ${2*a.ia}px; height: 20px; background-color: #b00;"></div></div>`;let c=Infinity;[a.H,...lb(a.H)].forEach(d=>{let e=g(new f,
a.M,d.position),k=e.$;k<c&&(a.H=d,c=k,a.va=e)});a.ya||a.W?a.aa.set(0,0,0):ib(a);a.W?p.i&&!p.l&&hb(a):(Ca(a.M,b.length).forEach(d=>Ga(b[d],a)),a.M.K(a.aa),a.M.y=2.5,a.g.position.set(a.M),a.g.position.y+=3.5);mb(a.g,...fa(a.J));a.D.set(0,0,-1);a.D.set(a.g.sa.transformPoint(a.D));bb.set(a.g.position);cb.set(a.D);if(!a.xa||a.W)bb.y=-100;nb(a.g);jb(a)}
class ob{constructor(){var a=new pb(Math.PI/3,16/9,1,500),b=qb[0];this.M=new f;this.aa=new f;this.ya=!1;this.J=new f;this.W=!1;this.s=new f;this.va=new f;this.xa=!1;this.D=new f;this.ia=100;this.j=new Oa;this.j.g.connect(Ja);this.H=b;this.M.set(2,2.5,-2);this.Za=new db(this.M);this.g=a;this.i=G.listener;p.G=c=>{this.ya||(this.J.x+=-.001*c.y,this.J.y+=-.001*c.x,this.J.x=Math.min(Math.max(this.J.x,-Math.PI/2),Math.PI/2),this.J.y%=2*Math.PI)}}} function J(a){return 180/Math.PI*a}
 function rb(a){let b=da(ca(a[2]),a[1]);a=da(ca(a[0]),a[1]);return ea(new f,b,a)} function mb(a,b,c,d){a.sa=new DOMMatrix;a.I.set(J(b),J(c),J(d));a.sa.rotateSelf(J(b),J(c),J(d))} function nb(a){a.s=sb(a);a.za?a.T=a.za.T.multiply(a.s):a.T=DOMMatrix.fromMatrix(a.s);a.ha.forEach(b=>nb(b))} function sb(a){let b=new DOMMatrix;b.translateSelf(a.position.x,a.position.y,a.position.z);a.B?b.multiplySelf(a.sa):b.rotateSelf(a.I.x,a.I.y,a.I.z);b.scaleSelf(a.m.x,a.m.y,a.m.z);return b}
 function tb(a){ function b(d,e){d.ha.forEach(k=>{e.push(k);b(k,e)})}let c=[];b(a,c);return c} function ub(a,b){a.B=!0;m(g(a.g,a.position,b));m(ea(a.i,a.ma,a.g));m(ea(a.j,a.g,a.i));a.sa=new DOMMatrix([a.i.x,a.i.y,a.i.z,0,a.j.x,a.j.y,a.j.z,0,a.g.x,a.g.y,a.g.z,0,0,0,0,1])}
class vb{constructor(...a){this.I=new f;this.B=!1;this.i=new f;this.j=new f;this.g=new f;this.position=new f;this.m=new f(1,1,1);this.ha=[];this.s=new DOMMatrix;this.T=new DOMMatrix;this.ma=new f(0,1,0);this.sa=new DOMMatrix;a&&this.K(...a)}K(...a){a.forEach(b=>{b.za&&(b.za.ha=b.za.ha.filter(c=>c!==this));b.za=this;this.ha.push(b)})}A(a){this.ha=this.ha.filter(b=>b!==a)}v(a,b,c){this.I.K({x:J(a),y:J(b),z:J(c)});this.sa.rotateSelf(J(a),J(b),J(c))}}
class wb extends vb{constructor(){super(...arguments);this.Ba=[]}K(...a){super.K(...a);[...a,...a.flatMap(b=>tb(b))].forEach(b=>{b.ca&&(xb(b.ca),this.Ba.push(b))})}A(a){super.A(a);[a,...tb(a)].forEach(b=>{b.ca&&(this.Ba=this.Ba.filter(c=>c!==b))})}}class pb extends vb{constructor(a,b,c,d){super();a=Math.tan(.5*Math.PI-.5*a);let e=1/(c-d);this.fb=new DOMMatrix([a/b,0,0,0,0,a,0,0,0,0,(c+d)*e,-1,0,0,c*d*e*2,0])}}class K extends vb{constructor(a,b){super();this.ca=a;this.kb=b}}
class yb{constructor(a){this.Aa=a;this.D=m(rb(a))}} function zb(a,b,c){return (new f).set(c.transformPoint(new f(b[a],b[a+1],b[a+2])))} function Ab(a){return a.flatMap(b=>{let c=b.ca.ba,d=b.ca.V.get(0),e=[];for(let l=0;l<c.length;l+=3){var k=3*c[l+1],n=3*c[l+2];let u=zb(3*c[l],d.data,b.T);k=zb(k,d.data,b.T);n=zb(n,d.data,b.T);e.push([u,k,n])}return e.map(l=>new yb(l))})}
 function Bb(a){var b=Cb;z.activeTexture(z.TEXTURE2);z.bindFramebuffer(36160,b.i);z.viewport(0,0,b.size,b.size);z.framebufferTexture2D(36160,36064,34069+a,b.g,0)}
class Db{constructor(){this.size=1024;z.activeTexture(z.TEXTURE2);this.j=z.createTexture();z.bindTexture(3553,this.j);z.texStorage2D(3553,1,z.DEPTH_COMPONENT32F,1024,1024);this.g=z.createTexture();z.bindTexture(34067,this.g);z.texParameteri(34067,10241,z.LINEAR);z.texParameteri(34067,10240,z.LINEAR);z.texParameteri(34067,z.TEXTURE_WRAP_S,33071);z.texParameteri(34067,z.TEXTURE_WRAP_T,33071);z.texParameteri(34067,z.TEXTURE_WRAP_R,33071);for(let a=0;6>a;a++)z.texImage2D(34069+a,0,z.RGBA32F,1024,1024,
0,z.RGBA,z.FLOAT,null);this.i=z.createFramebuffer();z.bindFramebuffer(36160,this.i);z.framebufferTexture2D(36160,z.DEPTH_ATTACHMENT,3553,this.j,0);z.readBuffer(z.NONE)}}z.enable(z.CULL_FACE);z.enable(z.DEPTH_TEST);z.blendFunc(z.SRC_ALPHA,771);z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,!0);z.getExtension("EXT_color_buffer_float");z.getExtension("OES_texture_float_linear");
let Eb=z.getUniformLocation(t.i,"I"),Fb=z.getUniformLocation(t.i,"M"),Gb=z.getUniformLocation(t.i,"d"),Hb=z.getUniformLocation(t.i,"c"),Ib=z.getUniformLocation(t.i,"y"),Jb=z.getUniformLocation(t.j,"l"),Kb=z.getUniformLocation(t.j,"v"),Lb=z.getUniformLocation(t.j,"e"),Mb=z.getUniformLocation(t.i,"l"),Nb=z.getUniformLocation(t.i,"v");z.useProgram(t.i);let Ob=new pb(Math.PI/2,1,.1,60);
 function Pb(a,b,c){b=m(g(new f,b,a));c=m(ea(new f,b,c));let d=ea(new f,c,b);b=new f(-1*b.x,-1*b.y,-1*b.z);return new DOMMatrix([c.x,d.x,b.x,0,c.y,d.y,b.y,0,c.z,d.z,b.z,0,-h(c,a),-h(d,a),-h(b,a),1])}let Cb=new Db;
 function Qb(a,b){let c=a.T.inverse(),d=a.fb.multiply(c);z.useProgram(t.j);z.disable(z.BLEND);z.uniform3fv(Kb,fa($a));[{target:new f(1,0,0),ma:new f(0,-1,0)},{target:new f(-1,0,0),ma:new f(0,-1,0)},{target:new f(0,1,0),ma:new f(0,0,1)},{target:new f(0,-1,0),ma:new f(0,0,-1)},{target:new f(0,0,1),ma:new f(0,-1,0)},{target:new f(0,0,-1),ma:new f(0,-1,0)}].forEach((e,k)=>{Bb(k);z.clearColor(1,1,1,1);z.clear(16640);e=Pb($a,aa(new f,$a,e.target),e.ma);let n=Ob.fb.multiply(e);b.Ba.forEach(l=>{z.bindVertexArray(l.ca.Ta);
z.uniformMatrix4fv(Jb,!1,l.T.toFloat32Array());z.uniformMatrix4fv(Lb,!1,n.multiply(l.T).toFloat32Array());z.drawElements(z.TRIANGLES,l.ca.ba.length,5123,0)})});z.useProgram(t.i);z.enable(z.BLEND);z.uniform3fv(Nb,fa($a));z.uniform3fv(Hb,fa(bb));z.uniform3fv(Ib,fa(cb));z.uniform3fv(Gb,fa(ab));z.activeTexture(z.TEXTURE0);z.texParameteri(35866,10241,9987);z.viewport(0,0,z.canvas.width,z.canvas.height);z.bindFramebuffer(36160,null);z.cullFace(z.BACK);z.clearColor(0,0,0,0);z.clear(16640);b.Ba.forEach(e=>
{z.useProgram(t.i);let k=d.multiply(e.T);z.vertexAttrib1f(3,e.kb.O?.id??-1);z.bindVertexArray(e.ca.Ta);z.uniformMatrix4fv(Fb,!0,e.color?e.nb:e.T.inverse().toFloat32Array());z.uniformMatrix4fv(Mb,!1,e.T.toFloat32Array());z.uniformMatrix4fv(Eb,!1,k.toFloat32Array());z.drawElements(z.TRIANGLES,e.ca.ba.length,5123,0)});z.bindVertexArray(null)} function Rb(a,b,c){return Array((a+1)*(b+1)).fill().map(()=>c.O.id)}
 function xb(a){let b=[...a.V.values()].reduce((k,n)=>k+n.data.length,0),c=new Float32Array(b);z.bindBuffer(34962,z.createBuffer());z.bindVertexArray(a.Ta);let d=0,e=0;a.V.forEach((k,n)=>{z.vertexAttribPointer(n,k.size,z.FLOAT,!1,0,d);z.enableVertexAttribArray(n);c.set(k.data,e);d+=k.data.length*k.data.BYTES_PER_ELEMENT;e+=k.data.length});z.bufferData(34962,c,z.STATIC_DRAW);z.bindBuffer(34963,z.createBuffer());z.bufferData(34963,a.ba,z.STATIC_DRAW)} function Sb(a,b,c,d){a.V.set(b,{data:c,size:d})}
 function L(a,b,c,d,e,k,n){b=[...Rb(a.i,a.j,b),...Rb(a.i,a.j,c??b),...Rb(a.l,a.i,d??b),...Rb(a.l,a.i,e??b),...Rb(a.l,a.j,k??b),...Rb(a.l,a.j,n??b)];Sb(a,3,new Float32Array(b),1);return a} function P(a,b=!1){let c=a.P.map(()=>new f);b=b?Tb(a):a.ba;for(let d=0;d<b.length;d+=3){let e=rb([a.P[b[d]],a.P[b[d+1]],a.P[b[d+2]]]);c[b[d]].K(e);c[b[d+1]].K(e);c[b[d+2]].K(e)}Sb(a,1,new Float32Array(c.flatMap(d=>fa(m(d)))),3);return a} function Q(a){Sb(a,0,new Float32Array(a.P.flatMap(b=>fa(b))),3);return a}
 function Ub(a){a.g=a.P;return a} function Vb(a,b){a.g=a.P.filter(b);return a} function Wb(a,b){a.g.forEach(b);return a} function Xb(a,b){Wb(a,c=>{m(c).m(b)});return a}
 function R(a,b){var c=b.ba.map(e=>e+a.P.length);a.ba=new Uint16Array([...a.ba,...c]);a.P.push(...b.P);c=a.V.get(2).data;var d=b.V.get(2).data;c=new Float32Array([...c,...d]);Sb(a,2,c,2);c=a.V.get(1).data;d=b.V.get(1).data;c=new Float32Array([...c,...d]);Sb(a,1,c,3);a.V.get(3)&&(c=a.V.get(3).data,b=b.V.get(3).data,b=new Float32Array([...c,...b]),Sb(a,3,b,1));return a} function Yb(a,b,c="y"){var d={x:0,y:0,z:0};Wb(a,e=>{let k=e[c];e[c]=0;m(da(e,d)).m(b);e[c]=k});return a}
 function S(a,b=12,c=12,d=0){let e=(2+(a.l-1))*(2+(a.i-1))*2,k=e+(2+(a.i-1))*(2+(a.j-1))*2,n=a.V.get(2).data,l,u;a.P.forEach((x,y)=>{y<e?(l=x.x,u=x.z):(l=y<k?x.z:x.x,u=x.y);n.set([l/b+d,u/c],2*y)});Sb(a,2,n,2);return a} function Tb(a){let b=[],c=a.ba.slice();a.g.forEach(d=>{if(!b.find(k=>ka(d,k))){b.push(d);var e=a.P.findIndex(k=>ka(d,k));a.P.forEach((k,n)=>{ka(d,k)&&(c[c.indexOf(n)]=e)})}});return c}
class T{constructor(a=1,b=1,c=1,d=1,e=1,k=1,n=6){this.P=[];this.g=[];this.V=new Map;this.l=d;this.i=k;this.j=e;this.Ta=z.createVertexArray();let l=[],u=[],x=0,y=(w,A,q,v,pa,ha,B,M,ja,qa)=>{let N=ha/ja,Ia=B/qa;ha/=2;let Y=B/2,ba=M/2;M=ja+1;B=qa+1;for(let O=0;O<B;O++){let xa=O*Ia-Y;for(let ya=0;ya<M;ya++){let eb=ya*N-ha,za=new f;za[w]=eb*v;za[A]=xa*pa;za[q]=ba;this.P.push(za);u.push(ya/ja,1-O/qa)}}for(w=0;w<qa;w++)for(A=0;A<ja;A++)q=x+A+M*(w+1),v=x+(A+1)+M*w,l.push(x+A+M*w,q,v,q,x+(A+1)+M*(w+1),v);
x+=M*B};a=[["x","z","y",1,1,a,c,b,d,k],["x","z","y",1,-1,a,c,-b,d,k],["z","y","x",-1,-1,c,b,a,k,e],["z","y","x",1,-1,c,b,-a,k,e],["x","y","z",1,-1,a,b,c,d,e],["x","y","z",-1,-1,a,b,-c,d,e]];for(b=0;b<n;b++)y(...a[b]);Sb(this,2,new Float32Array(u),2);this.ba=new Uint16Array(l);Ub(Q(P(this)))}h(a=0,b=0,c=0){this.g.forEach(d=>d.K({x:a,y:b,z:c}));return this}m(a=1,b=1,c=1){let d=(new DOMMatrix).scaleSelf(a,b,c);this.g.forEach(e=>e.set(d.transformPoint(e)));return this}v(a=0,b=0,c=0){let d=(new DOMMatrix).rotateSelf(J(a),
J(b),J(c));this.g.forEach(e=>e.set(d.transformPoint(e)));return this}} function U(a,b,c,d,e=1,k=12,n){let l,u=0,x=0,y=0;c.forEach((w,A)=>{let q=a[A];0<w&&(w=S((new T(q,w,e,1,1,1,6)).h(x+(0===A?0:q/2),b-w/2),k,k),n&&L(w,...n),l?R(l,w):l=w);0<d[A]&&(w=S((new T(q,d[A],e,1,1,1,6)).h(x+(0===A?0:q/2),d[A]/2),k,k),n&&L(w,...n),l?R(l,w):l=w);x+=0===A?q/2:q;y+=q});u=y;l&&Q(P(Ub(l).h((a[0]-y)/2,0)));return [l,u]} function Zb(a,b,c){a?.h(0,0,c);b?.h(0,0,-c);return a&&b?Q(R(a,b)):a??b}
 function $b(a,b,c,d){return Q(P(R(Zb(a[0],b[0],(c[1]+1)/2),Zb(c[0],d[0],(a[1]-1)/2).v(0,Math.PI/2))))} function ac(a){a.i?a.G():a.g&&a.s()}
class bc{constructor(){this.g=this.i=this.j=!1;var a=U([4,7.9,4],12,[12,3,12],[0,0,0],1),b=U([16],12,[12],[],1),c=U([10],12,[12],[],1),d=U([10],12,[12],[],1);a=new K($b(a,b,c,d),F.R);b=new K(Q(R(R((new T(10,.5,.3)).h(0,4,-4),(new T(.3,.5,6)).h(-6,4,0)),(new T(.3,.5,6)).h(6,4,0))),F.R);c=new K(Q(P(S((new T(1.5,2,1)).h(5.4,5,5.2),-2,2,.2).h(0,0,.2))),F.jb);d=[1.25,4,.5,4,.5,4,1.25];var e=[.5,4,.5,4,.5];d=new K(Q($b(U([d.reduce((u,x)=>u+x)],9,[0],[0]),U(d,9,[0,9,0,9,0,9,0],[0]),U(e,9,[0,9,0,9,0],[0]),
U(e,9,[0,9,0,9,0],[0])).h(0,1.25)),F.o);e=new K(S(new T(15,1.5,10.5),5,5),F.bb);let k=new K(S(Q((new T(15,1.5,10)).h(0,12))),F.Ya),n=new K(Q((new T(4,9,.5)).h(-2,4.5,5.5)),F.R),l=new K(Q((new T(4,9,.5)).h(2,4.5,5.5)),F.R);this.l=a;this.A=new Set(Ab([n,l]));this.B=[a,b,e,k,d,c,n,l];this.G=()=>{-5<n.position.x?(n.position.x-=.035,l.position.x+=.035):this.i=!1;this.j=-1>n.position.x};this.s=()=>{0>n.position.x?(n.position.x+=.04,l.position.x-=.04):this.g=!1;this.j=-1>n.position.x}}}
 function V(a,b=!1,c=!1){ function d(){let D=L(new T(3,3,2),F.o);c&&R(D,L((new T(1,.2)).h(0,1,.6),F.R));return Q(P(D))}var e=U([3,5,15],12,[12,3,12],[0,0,0],1,4,[F.na,,,,,F.S]);let k=U([23],12,[12],[],1,4,[F.S,,,,,F.na]),n=U([34],12,[12],[],1,4,[F.S,,,,,F.na]),l=U([34],12,[12],[],1,4,[F.S]),[u]=U([4,5,4],12,[12,3,12],[],1,4,[F.na]);P(u.v(0,Math.PI).h(-10));let x=S(L(new T(1,12,11.5),F.na).h(-4,6,-6.25),4,4),y=S(L(new T(3,12,4),F.na).h(-6,6,-9.5),4,4),w=S(R(L(new T(9,3,1),F.na),L((new T(12,.5,1.5)).h(2,
1.25),F.o)).h(-12,10,-8),4,4),A=Q(L((new T(7,2,8)).h(6,2,-6.5),F.C)),q=Q(L((new T(3,1,7)).h(-5.5,3,-4),F.C)),v=Q(L((new T(2,3,4.75)).h(-14.5,1.5,-.25),F.C)),pa=Q(L((new T(7,5,3)).h(-11.5,3,-9),F.C)),ha=Q(L((new T(4,8,6)).h(14,4,5),F.C));var B=L(S((new T(10,2,8)).h(-11,-.4,-4),6,6,-.03),F.bb);let M=Q(P(R(R(R(R(R(Ub(L(Vb(Wb(Xb(Vb(new T(3,1,7,12,1,12),D=>0<D.y&&1>Math.hypot(D.x,D.z)),1).h(0,-.5),D=>D.y*=-1).h(0,.4,0),D=>-.5<D.y&&1.3>Math.hypot(D.x,D.z)).h(-.2),F.C)),L(Yb(new T(1,1,1,2,1,2),.2).h(1.1,
.3,-.5),F.R)),L(Yb(new T(1,1,1,2,1,2),.2).h(1.1,.3,.5),F.R)),L((new T(1,.2,.4)).h(.7,.7),F.R)),L((new T(3,3,7)).h(.1,-2),F.o)),L((new T(1,4,4)).h(1.5,3.2),F.R)).h(-6,3.2,-4),!0)),ja=Q(P(R(R(R($b([L(new T(8.5,3,.5),F.C),9.75],[L(new T(8.5,15,.5),F.C),9.75],[L(new T(3.75,15,.5),F.C),2.5],[L(new T(3.75,15,.5),F.C),2.5]),L(new T(8.5,.5,3),F.C)),L(Ub(Vb(Yb(new T(1,1,1,1,3,3),.1,"x"),D=>0>D.x).m(1,3,3)).v(0,0,.5).h(3.75,6.5),F.R)),L(Wb(new T(6,7,.1,10,1,1),D=>D.z=.3*Math.sin(3*D.x)).h(-.5,3.75,2.5).v(-.1),
F.C)).h(-11.75,1,-9.5))),qa=Q(R(R(R(R(R(R(L((new T(.2,8,6)).h(1.5),F.o),L((new T(3,.2,6)).h(0,-4),F.o)),L((new T(3,.2,6)).h(0,4),F.o)),L((new T(3,8.2,.2)).h(0,0,3.1),F.o)),L((new T(3,8.2,.2)).h(0,0,-3.1),F.o)),L((new T(.2,8,3)).h(-.5,0,-1.75).v(0,.25),F.o)),L((new T(.2,8,3)).h(-2.75,0,.8).v(0,.5),F.o)).h(14,4.5,5));var N=()=>Q(P(L(Ub(Vb(Xb(new T(1,1,1,4,3,4),1),D=>.8<Math.abs(D.x)||.8<Math.abs(D.z)).m(.8,1,.8)).m(2,.3).v(.5).h(0,1.3,-3.5),F.C),!0));N=Q(R(P(R(R(L(Ub(Vb(Vb(new T(7,2,7,8,1,8),D=>4.5<
Math.hypot(D.x,D.z)).m(.9,1,.9),D=>3<Math.hypot(D.x,D.z)).m(1,.9,1)).m(1,1,1.2),F.C),N().h(-1.5)),N().h(1.5)),!0),P(R(L((new T(7,7,.5)).h(0,0,-4.5),F.o),L((new T(7,1,8.5)).h(0,-1.5),F.o)))).h(6,2,-6.5));let Ia=Q(Ub(R(L(Vb(Yb(new T(2,2,2,6,2,6),1).m(1,1,1.2),D=>0===D.y).m(.7,1,.7).h(0,-.5),F.C),L((new T(2,2,1)).h(0,1.5,1.5),F.C))).h(-14.5,1.5,-2.25)),Y=d().h(-.25,1.5,-9.5),ba=d().h(12.25,1.5,-9.5),O=R(R(d(),d().h(3)),d().h(-3)).v(0,3.14).h(0,1.5,10),xa=U([3,5,15],12,[1,1,1],[1,0,1],1.5,4,[F.o]),ya=
U([23],12,[1],[1],1.5,4,[F.o]),eb=U([34],12,[1],[1],1.5,4,[F.o]),za=U([34],12,[1],[1],1.5,4,[F.o]),Dc=U([4.25,4.5,4.25],12,[1,1,1],[1,0,1],1.5,4,[F.o]),Ec=U([12],12,[1],[1],1.5,4,[F.o]),Fc=U([.5,4.5,.5],9,[12,.5,12],[],1.5,4,[F.o]);B=Q(P(R(R(R(R(R($b(eb,za,ya,xa),Dc[0].v(0,Math.PI).h(-10)),Ec[0].v(0,Math.PI/2).h(-4,0,-5.25)),Fc[0].v(0,Math.PI/2).h(-16.5,0,6)),B),R(R(R(R(S(L(new T(1,3.5,3),F.o),4,4).h(-16.6,2.5,10),S(L(new T(1,3.5,15),F.o),4,4).h(-16.6,2.5,-4)),S(L(new T(1,3.5,23),F.o),4,4).h(16.6,
2.5,0)),S(L(new T(33,3.5,1),F.o),4,4).h(0,2.5,12.1)),S(L(new T(33,3.5,1),F.o),4,4).h(0,2.5,-12.1)))));a=L(new T(1,1),F[a]).h(-16.6,5,b?9.5:2.5);e=R(R(R(R($b(n,l,k,e),u),x),y),w);return c?R(R(R(R(R(R(R(R(R(R(e,B),a),qa),M),ja),N),Ia),Y),ba),O):R(R(R(R(R(R(R(R(e,A),ha),q),v),pa),Y),ba),O)}
 function cc(a=!1){let b=Q(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(V(1,!1,a).h(0,0,10),V(2,!1,a).h(0,0,45)),V(3,!1,a).h(0,0,80)),V(5,!1,a).h(-44,0,10)),V(7,!1,a).h(-44,0,45)),V(9,!1,a).h(-44,0,80)),V(4,!0,a).v(0,Math.PI).h(-88,0,10)),V(6,!0,a).v(0,Math.PI).h(-88,0,45)),V(8,!0,a).v(0,Math.PI).h(-88,0,80)),V(10,!0,a).v(0,Math.PI).h(-132,0,10)),V(11,!0,a).v(0,Math.PI).h(-132,0,45)),V(12,!0,a).v(0,Math.PI).h(-132,0,80)).h(66,0,14),U([45,11,45],12,[12,2,12],[],1,4,[F.S])[0]),R(R(R(R(U([45,11,45],12,[12,3,12],[],
1,4,[F.S])[0],U([.5,10,.5],9,[12,.5,12],[],1.5,12,[F.o])[0]),L(new T(2,1.5),F[13]).h(0,10,-.1)),$b([S(L(new T(20,12,.5),F.S),6,6),20],[void 0,20],[S(L(new T(19.5,12,.5),F.S),6,6),19],[S(L(new T(19.5,12,.5),F.S),6,6),19]).h(0,6,10)),L((new T(3,3.25,3)).h(0,1.5,15),F.o)).h(0,0,118)),U([11,25,10,25,10,25,11],12,[12,0,12,0,12,0,12],[],1,4,[F.S])[0].v(0,Math.PI/2).h(49.5,0,59)),U([11,25,10,25,10,25,11],12,[12,0,12,0,12,0,12],[],1,4,[F.S])[0].v(0,Math.PI/2).h(-49.5,0,59)));a&&P(R(b,dc()));return b}
 function dc(){let a=[-44,0,44].map(b=>R(R(R(R(R(ec(b,0),ec(b,24.25)),ec(b,35)),ec(b,59.25)),ec(b,70)),ec(b,94.25)));return R(R(a[0],a[1]),a[2])} function ec(a,b){return U([.75,9.5,.75],12,[12,1,12],[],1.25,4,[F.o])[0].h(a,0,11.875+b)} function fc(a,b=!1){a.U=b?1:3;a.ea||(a.ea=!0,a.la*=-1,H(a.l,G.currentTime,10,40,Xa,G.currentTime+1),b&&H(a.l,G.currentTime,72,20,Sa,G.currentTime+1))}
class W extends vb{constructor(a,b,c=1,d=1,e,k){super(new K(Q(R(L(new T(5,7.75,.25),F.o),L(Yb(new T(1,1,1,4,4),.2,"z").h(2*c,-.5),F.R))),F.C));this.G=0;this.pa=!1;this.la=-1;this.ea=!1;this.U=3;this.l=new Oa;this.pa=!!k;this.Qa=new f(a-(e?2*c:0),4.75,b-(e?2*c:0));this.Y=c;this.Z=d;this.l.g.connect(Ja);this.position.set(a-2*c,4.75,b);this.ha[0].position.x=2*c;this.X=new K(Q((new T(e?1:4,7,e?4:1)).h(a-(e?2*c:0),4.75,b-(e?2*c:0))),new r);this.Qa.y-=3;this.ib=new Set(Ab([this.X]));e&&(this.G=this.I.y=
90)}Sa(){this.ea&&(this.I.y+=this.Z*this.Y*this.U*this.la,Math.abs(this.I.y)-this.G===(-1===this.la?0:120)&&(this.ea=!1))}} function lb(a){return a.$a().filter(b=>void 0!==b)} function gc(a,b){a.ra=b;b.Ga=a} function hc(a,b){a.Ga=b;b.ra=a} function X(a,b,c){a.Xa=b;a.Ea=c;b.Ea=a;c.Xa=a} function ic(a,b,c){a.Ga=b;a.ra=c;b.ra=a;c.Ga=a}class Z{constructor(a,b,c,d){this.position=a;this.L=b;this.u=c;this.oa=d}$a(){return [this.Xa,this.Ea,this.ra,this.Ga]}}class jc{constructor(a,b){this.position=a;this.J=b}}
class kc{constructor(a,b,c){this.ab=!1;this.qa=(this.u=c)?-1===this.u?new K(Q(P(R(R(R(U([.5,2,.5,2,.5],2,[2,.5,2,.5,2],[],1,4,[F.red])[0],L(new T(5.5,.5),F.red).h(0,-2,0)).v(0,0,-Math.PI/2),L(Ub(Yb(new T(3,4,3,8,1,8),6)).h(0,-5.5),F.C)),L(Ub(Yb(new T(4,1,4,8,1,8),8)).h(0,-8),F.C)).v(0,Math.PI).m(.1,.1,.1))),F.R):new K(Q(R(Yb(new T(1,1,.5,3,3),.75,"z"),U([1,.5,.5,.5],1,[.25,1,.25,1],[0],.3)[0].h(1.75,-.75)).m(.5,.5,.5).h(-.5)),F.R):new K(Q(R(R(L(new T(1.9,1,.5),F.C),L(new T(.75,.2,.75),F.red)),L(new T(.2,
.75,.75),F.red))),F.o);this.qa.position.set(a);mb(this.qa,b.x,b.y,b.z);nb(this.qa)}}let qb=[],lc=[],mc=[1304,1306,1308,1310,1311,1312];
 function nc(a,b,c){let d=mc.includes(b),e=new Z(a,c,b),k=new f(12,0,-1),n=new f(27,0,-3),l=new f(35.5,0,.5),u=new f(12.75,0,-15);d&&(k.m(-1),n.m(-1),l.m(-1),u.m(-1));c=new Z(new f(a.x+k.x,a.y,a.z+k.z),c,b,new jc(new f(a.x+u.x,5.5,a.z+u.z),new f(0,d?0:3.14)));a=new Z(new f(a.x+n.x,a.y,a.z+n.z),void 0,b,new jc(new f(a.x+l.x,5.5,a.z+l.z),new f(0,d?-1.7:1.7)));ic(c,d?e:a,d?a:e);return e}
 function oc(a){ function b(ha){var B=mc.includes(ha.u)?-1:1;B=[[{position:new f(4.25*B,1.75,-7*B),I:new f(0,Math.PI/4)},{position:new f(-4.5*B,.5,-7.5*B),I:new f(0,-Math.PI/2)},{position:new f(-5.5*B,.75,-12.75*B),I:new f(0,0,Math.PI/2)}],[{position:new f(5.25*B,-.75,-12*B),I:new f(0,0,Math.PI/2)},{position:new f(-1*B,-.5,8.4*B),I:new f(0,0,-Math.PI/2)},{position:new f(-2*B,.8,-13.5*B),I:new f(Math.PI/3*-B,0,0)}]];c=c.filter(O=>O!==ha);let M,ja=0,qa=new f;c.forEach(O=>{let xa=g(qa,ha.position,O.position).$;
xa>ja&&(ja=xa,M=O)});.3>=Math.random()&&(M=c[Math.floor(Math.random()*(c.length-1))]);var N=lb(ha).find(O=>O.oa);let Ia=lb(N).find(O=>O.oa),Y=Math.floor(2*Math.random()),ba=Math.floor(3*Math.random());N=[N,Ia][Y];3<c.length?(N.item=new kc(aa(new f,N.position,B[Y][ba].position),B[Y][ba].I,M.u),M.L.pa=!0):N.item=2<c.length?new kc(aa(new f,N.position,B[Y][ba].position),B[Y][ba].I,1313):new kc(aa(new f,N.position,B[Y][ba].position),B[Y][ba].I);lc.push(N.item);1<=c.length&&b(M)}a=[nc(new f(44,2.5,36),
1301,a[0]),nc(new f(44,2.5,71),1302,a[1]),nc(new f(44,2.5,106),1303,a[2]),nc(new f(0,2.5,24),1304,a[3]),nc(new f(0,2.5,36),1305,a[4]),nc(new f(0,2.5,59),1306,a[5]),nc(new f(0,2.5,71),1307,a[6]),nc(new f(0,2.5,94),1308,a[7]),nc(new f(0,2.5,106),1309,a[8]),nc(new f(-44,2.5,24),1310,a[9]),nc(new f(-44,2.5,59),1311,a[10]),nc(new f(-44,2.5,94),1312,a[11])];let c=[...a],d=c[Math.floor(Math.random()*(c.length-1))];d.L.pa=!0;b(d);let e=new Z(new f(44,2.5,12)),k=new Z(new f(-44,2.5,12)),n=new Z(new f(44,2.5,
118)),l=new Z(new f(-44,2.5,118)),u=new Z(new f(0,2.5,12)),x=new Z(new f(0,2.5,47.5)),y=new Z(new f(0,2.5,82.5)),w=new Z(new f(0,2.5,118.5),void 0,1313);w.item=new kc((new f(0,1.4,20)).K(w.position),new f,-1);lc.push(w.item);let A=new Z(new f(44,2.5,47.5)),q=new Z(new f(44,2.5,82.5)),v=new Z(new f(-44,2.5,47.5)),pa=new Z(new f(-44,2.5,82.5));n.ra=l;n.Ea=e;l.Ea=k;e.ra=k;ic(u,e,k);ic(w,n,l);X(y,w,u);X(x,y,u);X(A,n,e);gc(A,x);X(q,n,A);gc(q,y);X(v,l,k);hc(v,x);X(pa,l,v);hc(pa,y);X(a[0],A,e);X(a[1],q,
A);X(a[2],n,q);X(a[9],v,k);X(a[10],pa,v);X(a[11],l,pa);X(a[3],x,u);X(a[4],x,a[3]);X(a[5],y,x);X(a[6],y,a[5]);X(a[7],w,y);X(a[8],w,a[7]);qb.push(u,e,k,n,l);return d} function pc(a,b,...c){a.g.ob?.();a.g={ka:()=>{}};b.ja?.(...c);a.g=b}class qc{constructor(a){var b=[];this.g=a;this.g.ja?.(...b)}}
 function rc(){let a=new K(Q(P(Ub(L(Vb(Vb(Xb(new T(1,1,1,6,6,6),.8).m(1,1.3,.8),b=>.7<b.y).m(3,1,1.5),b=>.8<b.y).m(1.5,8,2),F.wa,F.wa,F.wa,F.wa,F.face,F.wa)).v(Math.PI).h(0,5),!0)),F.face);a.position.set(0,54,2);return a} function sc(a){a.ta.g.gain.linearRampToValueAtTime(0,G.currentTime+1);clearInterval(a.Wa)}
 function tc(a,b){uc(a,b);b.H.oa?vc(a,4,2):vc(a,8,9);if(!wc(a,b)){if(a.Y>6-2*xc(a))ia(a.A,a.X,xc(a)/4),yc(a);else{yc(a);let c=a.g;a.g=a.i;Math.random()<a.l/3?zc(a,b.H):(b=lb(a.g),1<b.length&&(b=b.filter(d=>{let e=a.g.L&&d.L&&a.g.u===d.u&&a.g!==d&&!a.g.oa;return d!==c&&!e})),a.i=b[Math.floor(Math.random()*b.length)])}a.i||(a.i=a.g)}}
 function Ac(a,b){vc(a,5,5);b.W||pc(a.j,a.B,b);.5<a.Y?(ia(a.A,a.X,1),yc(a)):300>=a.Da?(a.s.v(0,100<a.Da?-.02:.02,0),a.Da++):(a.Oa++,a.g=a.i,a.g===b.H&&Math.random()<Math.min(a.l,.3)?pc(a.j,a.Ja,b):(a.i=lb(a.g).find(c=>c.oa),Bc(a),a.Da=0,2<=a.Oa&&.25<Math.random()&&(pc(a.j,a.Ua,b),Cc(a))))} function Gc(a,b){let c=0,d=new f;qb.forEach(e=>{let k=g(d,b.M,e.position).$;k>c&&(c=k,a.U=e)})}
 function Hc(a,b){ab.set(.005,.001,.4);a.Ha=!0;Gc(a,b);a.position.set(a.U.position);a.g=a.U;b=lb(a.g);a.i=b[Math.floor(Math.random()*b.length)];pc(a.j,a.Na)} function Ic(a){let b=()=>{for(let c of Za)H(a.ta,G.currentTime+c[2],c[1],c[4]-10,[Qa,Ra][c[0]],G.currentTime+c[2]+c[3])};a.ta.g.gain.cancelScheduledValues(G.currentTime);a.ta.g.gain.setValueAtTime(1,G.currentTime);b();a.Wa=setInterval(b,6E3)} function Cc(a){.9>=a.l&&(a.l+=.1)} function xc(a){return Math.min(.15+.23*a.l,.3)}
 function Bc(a){g(a.La,a.i.position,a.position);a.Y=a.La.$;a.X=m(ca(a.La));g(a.ga,a.g.position,a.position)} function vc(a,b,c){a.Ka.position.z=b;$a.set(a.Ka.T.transformPoint(new f(0,0,0)));$a.y=c}
 function uc(a,b){let c=(k,n)=>{let l=k?.$a()[n];if(l&&!(l.L&&1!==l.L.la&&l.u&&k.u&&l.u===k.u))if(l===b.H){if(k=2>n&&5.75>Math.abs(b.va.x)||1<n&&5.75>Math.abs(b.va.z),n=2>n&&5.75>Math.abs(a.ga.x)||1<n&&5.75>Math.abs(a.ga.z),!b.W&&k&&n&&60>g(new f,b.M,a.position).$)return a.ua=0,a.j.g!==a.B&&pc(a.j,a.B,b),!0}else c(l,n)},d=5.75>Math.abs(b.va.x)||5.75>Math.abs(b.va.z),e=5.75>Math.abs(a.ga.x)||5.75>Math.abs(a.ga.z);!b.W&&a.g===b.H&&d&&e?(a.ua=0,a.j.g!==a.B&&pc(a.j,a.B,b)):c(a.g,0)||c(a.g,1)||c(a.g,2)||
c(a.g,3)} function wc(a,b){if(a.g.L&&a.i.L&&a.g.u===a.i.u&&a.g!==a.i){if(-1===a.g.L.la||a.g.L.ea)return a.g.L.ea||(fc(a.g.L,!0),ub(a.s,a.i.position),a.A.set(a.X),Jc(a,b,2E3)),!0;a.g.L.ea||Jc(a,b,100)}return !1}
 function yc(a){.3<a.Y?(a.position.K(m(ca(a.A)).m(xc(a))),ub(a.s,aa(new f,a.position,a.A)),a.position.y=2.5+.1*Math.sin(a.position.x+a.position.z),2.402>a.position.y&&(clearTimeout(a.Va),a.Va=setTimeout(()=>H(a.Ca,G.currentTime,38+4*Math.random(),60,Pa,G.currentTime+1),40)),a.Ma.positionX.value=a.position.x,a.Ma.positionZ.value=a.position.z):a.position.set(a.i.position)}
 function zc(a,b){if(a.gb===b&&a.G.length)a.i=a.G[a.Z],a.Z<a.G.length-1&&a.Z++;else{a.Z=0;a.gb=b;a:{var c=a.g;if(c===b)b=[c];else{c=[{cb:c,eb:[c]}];for(var d=new Set;0<c.length;){let {cb:e,eb:k}=c.shift();d.add(e);for(let n of lb(e))if(!d.has(n)){let l=[...k,n];if(n===b){b=l;break a}c.push({cb:n,eb:l})}}b=void 0}}a.G=b}} function Jc(a,b,c){a.g.u===b.H.u&&setTimeout(()=>{b.W?pc(a.j,a.hb,b):a.j.g!==a.B&&a.j.g!==a.Ja&&pc(a.j,a.B,b)},c)}
class Kc{constructor(){this.Oa=this.Da=0;this.G=[];this.Z=0;this.A=new f;this.La=new f;this.Y=0;this.X=new f;this.ga=new f;this.Wa=0;this.Ca=new Oa;this.Ma=new PannerNode(G,{distanceModel:"linear",maxDistance:80,rolloffFactor:99,coneOuterGain:.1});this.l=this.ua=0;this.ta=new Oa;this.Ka=new vb;this.Va=0;this.Ha=!1;this.Ia=0;this.U=qb[0];this.ta.g.connect(Ka);this.Ca.g.connect(this.Ma).connect(Ja);this.g=qb[2];this.position=(new f).set(this.g.position);this.i=this.g;this.Na={ja:()=>{sc(this)},ka:a=>
tc(this,a)};this.B={ja:a=>{sc(this);Ic(this);this.G=[];this.Z=0;zc(this,a.H);this.i=this.G[1]??this.g;this.Z++;a=m(g(new f,this.i.position,this.position));this.A.set(a);this.ua=0},ka:a=>{vc(this,8,9);wc(this,a)||(this.ua++,uc(this,a),this.ua>=600+600*this.l&&(pc(this.j,this.Ua,a),Cc(this)),this.g.oa&&a.W&&a.H===this.g||(this.g===a.H||this.i===a.H)&&7>g(new f,this.position,a.M).$?pc(this.j,this.Ja,a):this.Y>(this.i.L?1:6)-2*xc(this)?(ia(this.A,this.X,xc(this)/4),yc(this)):(yc(this),this.g=this.i,zc(this,
a.H),this.i||(this.i=this.g)))}};this.hb={ja:()=>{this.Oa=0},ka:a=>Ac(this,a)};this.Ua={ja:a=>{sc(this);Gc(this,a);zc(this,this.U);this.i=this.G[0];Bc(this)},ka:()=>{vc(this,3,9);1<this.Y?(ia(this.A,this.X,1),yc(this)):(yc(this),this.g=this.i,zc(this,this.U),this.i||(this.i=this.g),this.i===this.U&&pc(this.j,this.Na))}};this.Ja={ka:a=>{vc(this,5,5);this.Ia++;a.ia-=.1;300===this.Ia&&(Hc(this,a),a.ya=!1,this.l*=.4)},ja:a=>{this.Ia=0;sc(this);a.xa=!1;let b=(new f).set(a.M);ub(this.s,b);H(this.Ca,G.currentTime,
70,100,Pa,G.currentTime+1);H(this.Ca,G.currentTime+.1,1,80,Ya,G.currentTime+5);a.W&&hb(a);a.ya=!0}};this.j=new qc(this.Na);this.s=rc();this.s.K(this.Ka)}Sa(a){this.Ha?(Bc(this),this.j.g.ka(a),this.s.position.set(this.position)):(this.s.position.y=-1E3,this.g=qb[0],sc(this))}} function Lc(a){H(a.g.j,G.currentTime,60,70,Va,G.currentTime+4);H(a.g.j,G.currentTime+.5,60,70,Pa,G.currentTime+2.5);H(a.g.j,G.currentTime+1.8,60,70,Pa,G.currentTime+2.5);H(a.s,G.currentTime,60,70,Ya,G.currentTime+1)}
class Mc{constructor(){this.X=[];this.Y=this.G=!1;this.s=new Oa;this.Z=!1;this.ga=new f;this.A=new f;this.U=!1;this.s.g.connect(Ka);this.B=new wb;this.i=[new W(48,33.75,-1,-1,!0),new W(48,68.75,-1,-1,!0),new W(48,103.75,-1,-1,!0),new W(-4,26.25,1,1,!0),new W(4,33.75,-1,-1,!0),new W(-4,61.25,1,1,!0),new W(4,68.75,-1,-1,!0),new W(-4,96.25,1,1,!0),new W(4,103.75,-1,-1,!0),new W(-48,26.25,1,1,!0),new W(-48,61.25,1,1,!0),new W(-48,96.25,1,1,!0),new W(2.5,124,-1,-1,!1,!0),new W(-2.5,124,1,-1,!1,!0)];let a=
oc(this.i).u;this.g=new ob;this.g.l=a;this.l=new Kc;this.j=new bc}ja(){let a=new K(Q(S(new T(180,1,180,20,1,20),5,5).h(0,0,64)),F.mb),b=new K(S(Q((new T(170,1,160)).h(0,12,65)),5,5),F.Ya),c=new K(Q(cc(!0).h(0,0,6)),F.S),d=new K(Q(cc().h(0,0,6)),F.S);this.B.K(...this.j.B,b,a,c,...this.i,this.l.s,...lc.map(e=>e.qa));this.X=Da(Ab([a,d,this.j.l]));this.g.J.set(0,Math.PI,0);H(this.g.j,G.currentTime,60,70,Wa,G.currentTime+6);setTimeout(()=>{this.j.i=!0;Lc(this)},7E3)}ka(){tmpl.innerHTML="";kb(this.g,this.X);
this.l.Sa(this.g);ac(this.j);nb(this.B);Qb(this.g.g,this.B);this.j.j||Ga(this.j.A,this.g);[this.g.H.L,this.i[12],this.i[13]].forEach((b,c)=>{if(b){let d=g(this.ga,this.g.M,b.Qa).$;-1===b.la&&!b.ea&&7>d&&Ga(b.ib,this.g);if(8>d){let e=h(this.g.D,m(this.ga));if(1>d||-.77>e)b.pa?this.g.l===this.g.H.u?(tmpl.innerHTML+='<div style="font-size: 30px; text-align: center; position: absolute; bottom: 20px; width: 100%;">\ud83d\udddd\ufe0f &nbsp; Unlock and Open</div>',p.i&&(fc(b),b.pa=!1,0<c&&(fc(this.i[12]),
this.i[12].pa=!1,fc(this.i[13]),this.i[13].pa=!1))):tmpl.innerHTML+='<div style="font-size: 30px; text-align: center; position: absolute; bottom: 20px; width: 100%;">\ud83d\udd12 &nbsp; Locked</div>':this.l.g.L===b?tmpl.innerHTML+='<div style="font-size: 30px; text-align: center; position: absolute; bottom: 20px; width: 100%;">\ud83d\udeab</div>':(tmpl.innerHTML+=`<div style="font-size: 30px; text-align: center; position: absolute; bottom: 20px; width: 100%;">${-1===b.la?"Open":"Close"} Door</div>`,
p.i&&fc(b))}}});this.i.forEach(b=>{b.ea&&b.Sa()});var a=this.g.H.oa;a&&8>g(this.A,this.g.g.position,a.position).$&&-.77>h(this.g.D,m(this.A))&&!this.g.W&&(tmpl.innerHTML+='<div style="font-size: 30px; text-align: center; position: absolute; bottom: 20px; width: 100%;">Hide</div>',p.i&&!p.l&&gb(this.g,a));(a=this.g.H.item)&&!a.ab&&6>g(this.A,this.g.g.position,a.qa.position).$&&-.9>h(this.g.D,m(this.A))&&(tmpl.innerHTML=a.u?-1===a.u?tmpl.innerHTML+'<div style="font-size: 30px; text-align: center; position: absolute; bottom: 20px; width: 100%;">\ud83c\udf82 Make a Wish</div>':
tmpl.innerHTML+`<div style="font-size: 30px; text-align: center; position: absolute; bottom: 20px; width: 100%;">\ud83d\udddd\ufe0f Take Room ${a.u} Key</div>`:tmpl.innerHTML+'<div style="font-size: 30px; text-align: center; position: absolute; bottom: 20px; width: 100%;">Use Health Pack</div>',p.i&&!p.l&&(a.ab=!0,-1!==a.u&&(this.B.A(a.qa),H(this.s,G.currentTime,90,30,Ta,G.currentTime+1)),a.u&&(this.g.l=a.u,Cc(this.l),this.Y||(ab.set(.001,.001,.4),this.l.l=0,this.Y=!0,Hc(this.l,this.g)),1313===a.u&&
(this.l.Ha=!1,$a.set(0,3.7,138)),-1===a.u&&(H(this.s,G.currentTime,120,30,Ta,G.currentTime+1),$a.set(0,8,0),setTimeout(()=>{this.j.i=!0;Lc(this)},1E3))),a.u||fb(this.g)));!this.G&&17<g(new f,this.g.M,qb[0].position).$&&(this.G=!0,this.j.g=!0,Lc(this));this.G&&3>this.g.M.z&&(this.g.ya=!0,tmpl.innerHTML+='<div style="font-size: 40px; text-align: center; position: absolute; bottom: 20px; width: 100%;">You Win!</div>',this.Z||(this.Z=!0,this.j.g=!0,Lc(this)));0>=this.g.ia&&!this.U&&(this.U=!0,alert("YOU DIED"),
location.reload())}}let Nc=0,Oc=1E3/60;tmpl.innerHTML='<div style="font-size: 30px; text-align: center; position: absolute; bottom: 20px; width: 100%;">Click to Start</div>';
document.onclick=async()=>{ function a(c){var d=c-Nc;if(d>=Oc){Nc=c-d%Oc;p.l=p.i;p.B=p.s;c=p.g.get("KeyA")?-1:0;d=p.g.get("KeyD")?1:0;let e=p.g.get("KeyW")?-1:0,k=p.g.get("KeyS")?1:0;p.j.x=c+d;p.j.y=e+k;p.i=!!p.g.get("KeyE");p.s=!!p.g.get("KeyF");b.ka()}requestAnimationFrame(a)}tmpl.requestPointerLock();tmpl.innerHTML="";await ta();let b=new Mc;b.ja();a(0);document.onclick=()=>tmpl.requestPointerLock()};
}</script>
